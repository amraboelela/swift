#!/bin/bash

source ~/.bashrc

PARAM=x$1
PARAM2=x$2
cd $SWIFT_PATH

if [ ${PARAM} = "x-c" ] ; then
echo ========== Cleaning ===========
rm -rf build
rm -f swift/*.tar.gz
fi

<<<<<<< HEAD
if [ ${PARAM2} = "x-u" ] ; then
echo ========== Syncing ==========
git multi pull
git multi fetch upstream
git multi merge upstream/master
=======
if [ ${PARAM} = "x-u" ] || [ ${PARAM2} = "x-u" ] ; then
echo ========== Syncing ==========
git multi pull
git multi fetch apple
git multi merge apple/master
>>>>>>> 42272d9e932bb262590d4396fee7dfb142b0501c
fi

echo ========== Running script ==========
./swift/utils/android/build-toolchain || exit

echo ========== Finishing ==========
cd $SWIFT_PATH
test -e swift-android-toolchain || exit 
mkdir -p toolchains/android
rm -rf toolchains/swift-android-toolchain-$(date "+%u")
cp swift-android-toolchain toolchains/swift-android-toolchain-$(date "+%u")

